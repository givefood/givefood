{% extends "public/page.html" %}
{% load humanize %}

{% block title %}Requested items by item group - Give Food{% endblock %}

{% block body %}

    <div class="columns">
      <div class="column">
          <a href="{% url 'index' %}" class="logo"><img src="/static/img/logo.svg" alt="Give Food"></a>
      </div>
    </div>

    <div class="columns">
        <div class="column">
            <nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs">
            <ul>
                <li><a href="{% url 'index' %}">Give Food</a></li>
                <li><a href="{% url 'dash:index' %}">Dashboards</a></li>
                <li class="is-active"><a href="{% url 'dash:item_groups' %}" aria-current="page">Requested items by item group</a></li>
            </ul>
            </nav>
        </div>
    </div>

  <div class="columns">

    <div class="column">
      <h1>Requested items by item group</h1>
      <div id="chart" style="height:600px"></div>

      <table class="table is-striped is-narrow is-fullwidth">
        <thead>
          <tr>
              <th>Group</th>
              <th>Number of items</th>
          </tr>
        </thead>
        <tbody>
          {% for group in groups %}
              <tr>
                  <td>{{ group.group }}</td>
                  <td>{{ group.count|intcomma }}</td>
              </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div><br><br>

  <script src="/static/js/echarts.js"></script>

  <script>
    var chartDom = document.getElementById('chart');
    var myChart = echarts.init(chartDom);
    
    // Color palette for years
    var colors = ["#3366CC", "#DC3912", "#FF9900", "#109618", "#990099", "#3B3EAC", "#0099C6", "#DD4477", "#66AA00", "#B82E2E", "#316395", "#994499", "#22AA99", "#AAAA11", "#6633CC", "#E67300", "#8B0707", "#329262", "#5574A6", "#651067"];
    
    var option = {
      color: colors,
      tooltip: {
        trigger: 'item'
      },
      series: [
        {
          name: 'Number of items',
          type: 'pie',
          radius: '70%',
          data: [
            {% for group in groups %}
              {value: {{ group.count }}, name: "{{ group.group|safe }}"}{% if not forloop.last %},{% endif %}
            {% endfor %}
          ],
          emphasis: {
            itemStyle: {
              shadowBlur: 10,
              shadowOffsetX: 0,
              shadowColor: 'rgba(0, 0, 0, 0.5)'
            }
          }
        }
      ]
    };
    myChart.setOption(option);
  </script>

{% endblock %}
